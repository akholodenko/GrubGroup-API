var _querystring = require('querystring');
var _http = require('http');
var _request = require('request');

var um_citygrid = function() {
	return this;
};

var base_url = "http://api.citygridmedia.com/content/places/v2/search/latlon";

um_citygrid.prototype.search = function(params, callback) {
	_request({ 	method: 'GET', uri: base_url + '?' + _querystring.stringify(params) }, function (error, response, body) {
		if(!error && response.statusCode == 200) {
			callback(body);
		} else {
			console.log('error: '+ response.statusCode);
			console.log(body);
			callback('');
		}
	});
}

module.exports.createClient = function() {
	return new um_citygrid();
};